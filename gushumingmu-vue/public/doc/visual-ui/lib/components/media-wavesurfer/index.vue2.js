"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),l=require("lodash"),y=require("wavesurfer.js"),h={class:"wavesurfer-wrap"},k=e.defineComponent({name:"zv-media-wavesurfer"}),b=e.defineComponent({...k,props:{basicOption:{}},setup(v){const u=v,m=r=>{const n=e.ref(),a=e.ref(),o=e.ref(),c=e.ref(!1);let t;const f=d=>{t&&t.destroy(),t=y.create({container:n.value,...d,url:d.url}),t.on("ready",()=>{c.value=!0}),t.on("click",()=>{t.play()}),o.value&&a.value&&t&&(t.on("decode",s=>o.value.textContent=i(s)),t.on("timeupdate",s=>a.value.textContent=i(s)))};return e.onMounted(()=>f(r)),e.onBeforeUnmount(()=>{t&&t.destroy()}),{wavesurRef:n,timeRef:a,durationRef:o,loadingStatus:c,initWavesurfer:f}},i=r=>{const n=Math.floor(r/60),o=`0${Math.round(r)%60}`.slice(-2);return`${n}:${o}`},{wavesurRef:p,timeRef:_,durationRef:R,initWavesurfer:w}=m(u.basicOption);return e.watch(()=>l.cloneDeep(u.basicOption),(r,n)=>{l.isEqual(r,n)||w(r)},{deep:!0}),(r,n)=>(e.openBlock(),e.createElementBlock("div",h,[e.createElementVNode("div",{ref_key:"wavesurRef",ref:p,class:"wavesurfer"},[e.createElementVNode("div",{ref_key:"timeRef",ref:_,class:"time"},"0:00",512),e.createElementVNode("div",{ref_key:"durationRef",ref:R,class:"duration"},"0:00",512)],512)]))}});exports.default=b;
