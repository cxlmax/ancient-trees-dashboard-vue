"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("vue"),s=require("lodash"),_=require("../../commons/plugins/datasource/index.js"),b=require("../../commons/core/useChart.js"),l=require("../../commons/plugins/event/index.js"),O={class:"zerov-widget"},D=["id"],g=r.defineComponent({name:"zv-chart-other-theme-river"}),k=r.defineComponent({...g,props:{basicOption:{},sources:{},useEvents:{},uuid:{}},emits:["chart-click","chart-dblclick","chart-mousedown","chart-mouseover","chart-mouseout","chart-contextmenu"],setup(h,{expose:p,emit:v}){const e=h,f=v,{id:E,setOption:u,chart:m,renderChart:a,renderData:n}=b.useChart({basicOption:s.cloneDeep(e.basicOption),useEvents:s.cloneDeep(e.useEvents),customRenderData:t=>{t=s.cloneDeep(t),_.SHJDatasourceV2.parse({tId:e.uuid,sources:e.sources,callback:({data:c})=>{try{l.SHJParseEvent.parseEvents(e.useEvents,"dataListener",c);const o=[];s.isArray(c)&&c.forEach((i,q)=>{i.data.length>0&&i.data.forEach(d=>{o.push(s.cloneDeep([d.category,d.value,i.key]))})}),t.series[0].data=s.cloneDeep(o),u(t)}catch{l.SHJParseEvent.parseEvents(e.useEvents,"dataListener",null),u(t)}}})},emit:f});return r.watch(()=>e.sources,()=>{n(e.basicOption)},{deep:!0}),r.watch(()=>s.cloneDeep(e.basicOption),(t,c)=>{s.isEqual(t,c)||a(t)},{deep:!0}),p({getEchartsInstance:()=>m.value,refresh:()=>{e.sources&&e.sources.length>0&&a(e.basicOption),n(e.basicOption)},refreshView:()=>{e.sources&&e.sources.length>0&&a(e.basicOption)},refreshData:()=>{n(e.basicOption)}}),(t,c)=>(r.openBlock(),r.createElementBlock("div",O,[r.createElementVNode("div",{id:r.unref(E),class:"widget"},null,8,D)]))}});exports.default=k;
