"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),o=require("lodash"),p=require("../../commons/plugins/datasource/index.js"),c=require("../../commons/plugins/event/index.js"),m=e.defineComponent({name:"zv-media-image-dynamic"}),v=e.defineComponent({...m,props:{basicOption:{},sources:{},useEvents:{},uuid:{}},setup(u,{expose:i}){const t=u,d=()=>{const r=e.ref(""),s=()=>{p.SHJDatasourceV2.parse({tId:t.uuid,sources:t.sources,callback:({data:a})=>{try{c.SHJParseEvent.parseEvents(t.useEvents,"dataListener",a),r.value=a[0].data[0].src}catch{c.SHJParseEvent.parseEvents(t.useEvents,"dataListener",null)}}})};return e.onMounted(()=>e.nextTick(()=>s())),{init:s,src:r}},{init:n,src:l}=d();return e.watch(()=>o.cloneDeep(t.sources),(r,s)=>{o.isEqual(r,s)||n()},{deep:!0}),i({refresh:()=>n(),refreshView:()=>n(),refreshData:()=>n()}),(r,s)=>(e.openBlock(),e.createElementBlock("div",{class:"zerov-image",style:e.normalizeStyle({backgroundImage:`url('${e.unref(l)}')`,...t.basicOption.mode==="repeat"?{backgroundRepeat:"repeat",backgroundSize:"auto"}:{backgroundSize:t.basicOption.mode,backgroundRepeat:"no-repeat"}})},null,4))}});exports.default=v;
