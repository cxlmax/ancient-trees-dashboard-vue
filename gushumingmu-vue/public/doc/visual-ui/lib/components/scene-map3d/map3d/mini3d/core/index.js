"use strict";var h=Object.defineProperty;var d=(i,r,e)=>r in i?h(i,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[r]=e;var c=(i,r,e)=>d(i,typeof r!="symbol"?r+"":r,e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("three"),u=require("d3-geo"),m=require("./Renderer.js"),g=require("./Camera.js"),f=require("../utils/EventEmitter.js"),l=require("../utils/Sizes.js"),p=require("../utils/Time.js");require("three/examples/jsm/loaders/GLTFLoader");require("three/examples/jsm/loaders/DRACOLoader.js");class y extends f.EventEmitter{constructor(e,t={},s={}){super();c(this,"geoProjection",e=>{const{geoProjectionCenter:t,geoProjectionScale:s,geoProjectionTranslate:n}=this.config;return u.geoMercator().center(t).scale(s).translate(n)(e)});this.canvas=e,this.scene=new o.Scene,this.sizes=new l.Sizes(this),this.time=new p.Time(this),this.camera=new g.Camera(this,s),this.renderer=new m.Renderer(this);const n={geoProjectionCenter:[0,0],geoProjectionScale:120,geoProjectionTranslate:[0,0]};this.config=Object.assign({},n,t),this.sizes.on("resize",()=>{this.resize()}),this.time.on("tick",a=>{this.update(a)})}setCss3dVisible(e,t){e&&(this[e].visible=t,this[e].children.map(s=>{t?s.show():s.hide()}))}setAxesHelper(e=250){if(!e)return!1;const t=new o.AxesHelper(e);this.scene.add(t)}resize(){this.camera.resize(),this.renderer.resize()}update(e){this.camera.update(e),this.renderer.update(e)}destroy(){try{this.sizes.destroy(),this.time.destroy(),this.camera.destroy(),this.renderer.destroy(),this.scene.traverse(e=>{if(e instanceof o.Mesh){e.geometry.dispose();for(const t in e.material){const s=e.material[t];s&&typeof s.dispose=="function"&&s.dispose()}}}),this.canvas.parentNode.removeChild(this.canvas)}catch{}}}exports.Mini3d=y;
