"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("three");require("d3-geo");require("three/examples/jsm/controls/OrbitControls");require("three/examples/jsm/loaders/GLTFLoader");require("three/examples/jsm/loaders/DRACOLoader.js");const i=require("../mini3d/utils/utils.js");require("three/examples/jsm/libs/lil-gui.module.min");require("three/examples/jsm/utils/BufferGeometryUtils");require("three/examples/jsm/renderers/CSS3DRenderer");require("lodash");function d(o,t){const r=o[0]/t[0],n=o[1]/t[1];return Math.min(r,n)}function y(o,t){const r=[129.00074005126953,94.67551803588867],n=i.getBoundBox(t.mapGroup),e=d(r,[n.boxSize.x,n.boxSize.y]);t.mapGroup.scale.set(e,e,1);const a=i.getBoundBox(t.mapGroup);return t.mapGroup.position.x=-a.center.x,t.mapGroup.position.y=-a.center.y,o.scale=e,o.boundBox=a,t}function B(o,t){fetch(o).then(r=>r.text()).then(r=>{try{JSON.parse(r)&&t&&t(r)}catch{t(null)}}).catch(r=>{t(null)})}function S(o,t){const r=`https://lganv-1304359499.cos.ap-beijing.myqcloud.com/lg_cos_static/system/scene/map3d/china/${o}_full.json`;fetch(r).then(n=>n.text()).then(n=>{try{JSON.parse(n)&&t&&t(n)}catch{t(null)}}).catch(n=>{p(o,t),t(null)})}function p(o,t){const r=`https://lganv-1304359499.cos.ap-beijing.myqcloud.com/lg_cos_static/system/scene/map3d/china/${o}.json`;fetch(r).then(n=>n.text()).then(n=>{try{JSON.parse(n)&&t&&t(n)}catch{t(null)}}).catch(n=>{t(null)})}function q(o,t,r,n,e){const a=o.attributes.position,s=o.attributes.uv,l=o.groups[0].count;for(let u=0;u<l;u++){const g=a.getX(u),x=a.getY(u),f=(g-n)/t,h=(x-e)/r;s.setXY(u,f,h)}s.needsUpdate=!0,o.computeVertexNormals()}function m(o,t,r,n){let e=o.assets.instance.getResource3(t);return e.data?e.path?r?(r!==e.path&&(e.data=new c.TextureLoader().load(r),e.path=r),e.data.wrapS=e.data.wrapT=c.RepeatWrapping,{[n]:e.data}):{}:{}:!e.data&&r?(e.data=new c.TextureLoader().load(r),e.data.encoding=c.sRGBEncoding,e.path=r,e.data.wrapS=e.data.wrapT=c.RepeatWrapping,{[n]:e.data}):{}}exports.calcUv2=q;exports.calculateScale=d;exports.getMapDataByAdcode=S;exports.getMapDataByAdcode2=p;exports.getMapDataByUrl=B;exports.getTextureResource=m;exports.setScaleArea=y;
