"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("three");class p{constructor({time:t},r={}){this.instance=null,this.time=t,this.enable=!0,this.config=Object.assign({num:100,range:500,speed:.01,renderOrder:99,dir:"up",material:new c.PointsMaterial({map:p.createTexture(),size:20,color:16777215,transparent:!0,opacity:1,depthTest:!1,vertexColors:!0,blending:c.AdditiveBlending,sizeAttenuation:!0})},r),this.create()}create(){const{range:t,speed:r,dir:n,material:d,num:f,renderOrder:u}=this.config,s=[],o=[],g=[];for(let h=0;h<f;h++){s.push(Math.random()*t-t/2,Math.random()*t-t/2,Math.random()*t-t/2);const i=n==="up"?1:-1;g.push(Math.random()*i,(.1+Math.random())*i,.1+Math.random()*i);const a=d.color.clone(),l={};a.getHSL(l),a.setHSL(l.h,l.s,l.l*Math.random()),o.push(a.r,a.g,a.b)}const e=new c.BufferGeometry;e.setAttribute("position",new c.BufferAttribute(new Float32Array(s),3)),e.setAttribute("velocities",new c.BufferAttribute(new Float32Array(g),3)),e.setAttribute("color",new c.BufferAttribute(new Float32Array(o),3)),this.instance=new c.Points(e,d),this.instance.name="Particles",this.instance.renderOrder=u}static createTexture(){const t=document.createElement("canvas");t.width=1024,t.height=1024;const r=t.getContext("2d"),n=r.createRadialGradient(512,512,0,512,512,512);return n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=n,r.fillRect(0,0,1024,1024),new c.CanvasTexture(t)}update(t,r){if(!this.instance)return!1;const{range:n,speed:d,dir:f}=this.config,u=f==="up"?1:-1,s=this.instance.geometry.getAttribute("position"),o=this.instance.geometry.getAttribute("velocities"),g=s.count;for(let e=0;e<g;e++){let h=s.getX(e);s.getY(e);let i=s.getZ(e);const a=o.getX(e),l=o.getY(e);o.getZ(e),h+=Math.sin(a*r)*t,i+=d*u,i>n/2&&u===1&&(i=-n/2),i<-n/2&&u==-1&&(i=n/2),s.setX(e,h),s.setZ(e,i),o.setX(e,a),o.setY(e,l)}s.needsUpdate=!0,o.needsUpdate=!0}setParent(t){t.add(this.instance),this.time.on("tick",(r,n)=>{this.enable&&this.update(r,n)})}}exports.Particles=p;
