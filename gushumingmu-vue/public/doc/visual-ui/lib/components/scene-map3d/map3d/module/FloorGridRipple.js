"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("three"),f=require("lodash"),y=require("../map/DiffuseShader.js"),u=require("../map/utils.js");function G(e,o){const a=o.repeat||100,s=e.scene.getObjectByName("GridRipple");s&&e.scene.remove(s);const l=new r.PlaneGeometry(600,600),t=u.getTextureResource(e,"gridRippleMap",o.map,"map");f.isEmpty(t)||t.map.repeat.set(a,a);const c=u.getTextureResource(e,"gridRippleAlphaMap",o.alphaMap,"alphaMap");f.isEmpty(t)||c.alphaMap.repeat.set(a,a);const n=new r.MeshBasicMaterial({...t,...c,color:new r.Color(o.color||"#00ffff"),transparent:!0,opacity:o.diffuseOpacity,blending:r.AdditiveBlending}),i=new r.Mesh(l,n);i.rotateX(-Math.PI/2);const[d,m]=e.geoProjection(e.pointCenter);i.position.set(d,-m,.01);const p=i.clone();p.material=n.clone(),p.material.opacity=o.opacity,e.gridRippleGroup=new r.Group,e.gridRippleGroup.name="GridRipple",e.gridRippleGroup.add(i,p),e.gridRippleGroup.visible=o.show,e.scene.add(e.gridRippleGroup),e.diffuseShader=new y.DiffuseShader({material:n,time:e.time,size:600,diffuseColor:new r.Color(o.diffuseColor||"#079fe6"),diffuseSpeed:o.diffuseSpeed,diffuseWidth:o.diffuseWidth,diffuseDir:2})}exports.createFloorGridRipple=G;
