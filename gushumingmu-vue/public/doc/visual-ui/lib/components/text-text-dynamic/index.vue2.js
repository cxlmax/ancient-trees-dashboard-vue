"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("vue"),u=require("lodash"),y=require("../../commons/plugins/datasource/index.js"),c=require("../../commons/utils/json2css.js"),d=require("../../commons/plugins/event/index.js"),S=["ztitle"],m=t.defineComponent({name:"zv-text-text-dynamic"}),g=t.defineComponent({...m,props:{basicOption:{},sources:{},useEvents:{},uuid:{}},setup(f,{expose:p}){const r=f,x=()=>{const n=t.ref(""),o=e=>{c.autoInstallFont(e.fontFamily);const a={};e.color&&e.color.includes("linear-gradient")&&(a.backgroundImage=e.color,a["-webkit-background-clip"]="text",a.color="transparent");const h={};return e.textAlign==="left"&&(e.justifyContent="flex-start"),e.textAlign==="center"&&(e.justifyContent="center"),e.textAlign==="right"&&(e.justifyContent="flex-end"),{...c.jsonToCssStyle(e),...a,...h,...e.textShadow.show?{"--text-shadow":`${e.textShadow.x}px ${e.textShadow.y}px ${e.textShadow.value}px ${e.textShadow.color}`}:{}}},s=()=>{y.SHJDatasourceV2.parse({tId:r.uuid,sources:r.sources,callback:({data:e})=>{try{d.SHJParseEvent.parseEvents(r.useEvents,"dataListener",e),n.value=e[0].data[0].value}catch{d.SHJParseEvent.parseEvents(r.useEvents,"dataListener",null)}}})};return t.onMounted(()=>t.nextTick(()=>s())),{rendererDomStyle:o,init:s,value:n}},{rendererDomStyle:v,init:i,value:l}=x();return t.watch(()=>u.cloneDeep(r.basicOption),(n,o)=>{u.isEqual(n,o)||i()},{deep:!0}),t.watch(()=>u.cloneDeep(r.sources),(n,o)=>{u.isEqual(n,o)||i()},{deep:!0}),p({refresh:()=>i(),refreshView:()=>i(),refreshData:()=>i()}),(n,o)=>(t.openBlock(),t.createElementBlock("p",{class:"zerov-widget-text",style:t.normalizeStyle(t.unref(v)(n.basicOption.css)),ztitle:t.unref(l)},t.toDisplayString(t.unref(l)),13,S))}});exports.default=g;
