"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const c=require("vue"),s=require("lodash"),b=require("../../commons/plugins/datasource/index.js"),D=require("../../commons/core/useChart.js"),i=require("../../commons/plugins/event/index.js"),E={class:"zerov-widget"},O=["id"],g=c.defineComponent({name:"zv-chart-other-grid-percentage"}),w=c.defineComponent({...g,props:{basicOption:{},sources:{},useEvents:{},uuid:{}},emits:["chart-click","chart-dblclick","chart-mousedown","chart-mouseover","chart-mouseout","chart-contextmenu"],setup(l,{expose:d,emit:p}){const e=l,h=p,{id:v,setOption:o,chart:f,renderChart:a,renderData:n}=D.useChart({basicOption:s.cloneDeep(e.basicOption),useEvents:s.cloneDeep(e.useEvents),customRenderData:t=>{t=s.cloneDeep(t),b.SHJDatasourceV2.parse({tId:e.uuid,sources:e.sources,callback:({data:r})=>{try{i.SHJParseEvent.parseEvents(e.useEvents,"dataListener",r);const u=[...new Array(s.cloneDeep(r[0].data[0].value)%5/5*20).fill(Math.floor(s.cloneDeep(r[0].data[0].value)/5+1)*5),...new Array(20-s.cloneDeep(r[0].data[0].value)%5/5*20).fill(Math.floor(s.cloneDeep(r[0].data[0].value)/5)*5)];t.title.text=s.cloneDeep(r[0].data[0].value)+"%",t.dataset={source:u.map((m,_)=>[_,m])},o(t)}catch{i.SHJParseEvent.parseEvents(e.useEvents,"dataListener",null),o(t)}}})},emit:h});return c.watch(()=>e.sources,()=>{e.sources&&e.sources.length>0&&n(e.basicOption)},{deep:!0}),c.watch(()=>s.cloneDeep(e.basicOption),(t,r)=>{s.isEqual(t,r)||a(t)},{deep:!0}),d({getEchartsInstance:()=>f.value,refresh:()=>{e.sources&&e.sources.length>0&&a(e.basicOption),n(e.basicOption)},refreshView:()=>{e.sources&&e.sources.length>0&&a(e.basicOption)},refreshData:()=>{n(e.basicOption)}}),(t,r)=>(c.openBlock(),c.createElementBlock("div",E,[c.createElementVNode("div",{id:c.unref(v),class:"widget"},null,8,O)]))}});exports.default=w;
