"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=require("vue"),C=require("@vuepic/vue-datepicker"),k=require("nanoid"),s=require("dayjs");require("dayjs/locale/zh-cn");const w=require("dayjs/plugin/relativeTime"),V=require("./hooks/useDatePickerWatch.js"),E=require("../../../commons/plugins/datasource/index.js"),g=require("../../../commons/plugins/event/index.js"),N=require("../../../commons/utils/utils.js");require("@vuepic/vue-datepicker/dist/main.css");const a=r=>(o.pushScopeId("data-v-a6893215"),r=r(),o.popScopeId(),r),S={class:"left-sidebar"},q=a(()=>o.createElementVNode("span",null,"今天",-1)),P=[q],B=a(()=>o.createElementVNode("span",null,"昨天",-1)),D=[B],O=a(()=>o.createElementVNode("span",null,"前天",-1)),T=[O],$=a(()=>o.createElementVNode("span",null,"近7天",-1)),I=[$],j=a(()=>o.createElementVNode("span",null,"近15天",-1)),R=[j],H=a(()=>o.createElementVNode("span",null,"近30天",-1)),z=[H],F=a(()=>o.createElementVNode("span",null,"近365天",-1)),M=[F],J=o.defineComponent({name:"shj-date-picker"}),U=o.defineComponent({...J,props:{option:{},sources:{},useEvents:{},uuid:{}},emits:["on-change"],setup(r,{expose:v,emit:y}){o.useCssVars(e=>({"7f1b2dc8":e.option.css.dp.backgroundColor,"20b9512e":e.option.css.dp.textColor,"7ee84e98":e.option.css.dp.hoverColor,"890e71f2":e.option.css.dp.hoverTextColor,"3a87ef24":e.option.css.dp.primaryColor,"5b705f5c":e.option.css.dp.primaryDisabledColor,"3392ec7e":e.option.css.dp.primaryTextColor,"073d9608":e.option.css.dp.secondaryColor,"8e8fa1ec":e.option.css.dp.borderColor,"204c8eab":e.option.css.dp.menuBorderColor,43488052:e.option.css.dp.borderColorHover,"432c0bee":e.option.css.dp.borderColorFocus,d074ec0c:e.option.css.dp.disabledColor,fee81572:e.option.css.dp.scrollBarBackground,"28d423aa":e.option.css.dp.scrollBarColor,"037021e6":e.option.css.dp.successColor,"466330a9":e.option.css.dp.successColorDisabled,"6d0f2f73":e.option.css.dp.dangerColor,74789372:e.option.css.dp.disabledColorText,"60ef21bc":e.option.css.dp.highlightColor,"5cd1cbc0":e.option.css.dp.loader,"174f055d":e.option.css.dp.fontSize,"1d47b298":e.option.css.dp.inputBackgroundColor,"67c8fe04":e.option.css.dp.inputHeight})),s.extend(w),s.locale("zh-cn");const l=r,h=y,n=o.ref(),u=o.ref(k.nanoid()),m=()=>u.value=k.nanoid(),d=()=>{E.SHJDatasourceV2.parse({tId:l.uuid,sources:l.sources,callback:({data:e})=>{try{n.value=s(e[0].data[0].date)}catch{}}})};o.onMounted(()=>d()),V.useDatePickerWatch(l,d,m),v({refresh:()=>d(),refreshView:()=>m(),refreshData:()=>d()});const b=e=>{n.value=e,h("on-change",{data:n.value}),g.SHJParseEvent.parseEvents(l.useEvents,"on-change",{data:n.value})},p=e=>{e==="today"?n.value=s():e==="yesterday"?n.value=s().subtract(1,"day"):e==="before-yesterday"&&(n.value=s().subtract(2,"day"))},c=e=>{e==="last-7"?n.value=[s().subtract(7,"day").startOf("day"),s().endOf("day")]:e==="last-15"?n.value=[s().subtract(15,"day").startOf("day"),s().endOf("day")]:e==="last-30"?n.value=[s().subtract(30,"day").startOf("day"),s().endOf("day")]:e==="last-365"&&(n.value=[s().subtract(365,"day").startOf("day"),s().endOf("day")]),b(n.value)};return(e,t)=>(o.openBlock(),o.createElementBlock("div",{key:u.value,class:"date-picker"},[o.createVNode(o.unref(C),{modelValue:n.value,"onUpdate:modelValue":[t[7]||(t[7]=f=>n.value=f),b],range:e.option.range,"multi-calendars":e.option.multiCalendars,"month-picker":e.option.monthPicker,"time-picker":e.option.timePicker,"year-picker":e.option.yearPicker,"week-picker":e.option.weekPicker,"quarter-picker":e.option.quarterPicker,inline:e.option.inline,"auto-apply":e.option.autoApply,clearable:e.option.clearable,placeholder:e.option.placeholder,disabled:e.option.disabled,readonly:e.option.readonly,"action-row":{showNow:e.option.actionRow.showNow,showPreview:e.option.actionRow.showPreview,showSelect:e.option.actionRow.showSelect,showCancel:e.option.actionRow.showCancel},"disable-year-select":e.option.disableYearSelect,"enable-time-picker":e.option.enableTimePicker,"enable-seconds":e.option.enableSeconds,"time-picker-inline":e.option.timePickerInline,"now-button-label":e.option.nowButtonLabel,"cancel-text":e.option.cancelText,"select-text":e.option.selectText,"hide-input-icon":e.option.hideInputIcon,class:"date-picker-container",style:o.normalizeStyle(o.unref(N.Utils).json2cssObject(e.option.css.dp,"dp"))},{"left-sidebar":o.withCtx(f=>[o.createElementVNode("div",S,[e.option.range?o.createCommentVNode("",!0):(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[o.createElementVNode("div",{class:"left-sidebar-item",onClick:t[0]||(t[0]=i=>p("today"))},P),o.createElementVNode("div",{class:"left-sidebar-item",onClick:t[1]||(t[1]=i=>p("yesterday"))},D),o.createElementVNode("div",{class:"left-sidebar-item",onClick:t[2]||(t[2]=i=>p("before-yesterday"))},T)],64)),e.option.range?(o.openBlock(),o.createElementBlock(o.Fragment,{key:1},[o.createElementVNode("div",{class:"left-sidebar-item",onClick:t[3]||(t[3]=i=>c("last-7"))},I),o.createElementVNode("div",{class:"left-sidebar-item",onClick:t[4]||(t[4]=i=>c("last-15"))},R),o.createElementVNode("div",{class:"left-sidebar-item",onClick:t[5]||(t[5]=i=>c("last-30"))},z),o.createElementVNode("div",{class:"left-sidebar-item",onClick:t[6]||(t[6]=i=>c("last-365"))},M)],64)):o.createCommentVNode("",!0)])]),_:1},8,["modelValue","range","multi-calendars","month-picker","time-picker","year-picker","week-picker","quarter-picker","inline","auto-apply","clearable","placeholder","disabled","readonly","action-row","disable-year-select","enable-time-picker","enable-seconds","time-picker-inline","now-button-label","cancel-text","select-text","hide-input-icon","style"])]))}});exports.default=U;
