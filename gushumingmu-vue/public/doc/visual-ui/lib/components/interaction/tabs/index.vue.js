"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),x=require("@vueuse/core"),S=require("./hooks/useTabsWatch.js"),C=require("../../../commons/plugins/datasource/index.js"),d=require("../../../commons/plugins/event/index.js"),a=require("../../../commons/utils/utils.js"),E=require("../../../commons/components/text.vue.js"),B=["onClick"],j=e.defineComponent({name:"shj-tabs"}),z=e.defineComponent({...j,props:{option:{},sources:{},useEvents:{},uuid:{}},emits:["on-change"],setup(h,{expose:b,emit:k}){const t=h,i=k,o=e.ref([]),n=e.ref(t.option.value),r=()=>{C.SHJDatasourceV2.parse({tId:t.uuid,sources:t.sources,callback:({data:s})=>{if(!s){o.value=[];return}o.value=s[0].data,!n.value&&o.value.length>0&&(n.value=o.value[0].value,i("on-change",o.value[0]),d.SHJParseEvent.parseEvents(t.useEvents,"on-change",o.value[0])),f()}})};e.onMounted(()=>r());const m=s=>{s.value!==n.value&&(i("on-change",s),d.SHJParseEvent.parseEvents(t.useEvents,"on-change",s)),n.value=s.value};S.useTabsWatch(t,r,n,o),b({refresh:()=>r(),refreshView:()=>{},refreshData:()=>r()});const l=e.ref(null),v=150,u=e.ref(!1),f=()=>{e.nextTick(()=>{if(l.value){const{scrollWidth:s,clientWidth:p}=l.value;u.value=s>p}})},_=()=>{l.value&&(l.value.scrollLeft-=v)},g=()=>{l.value&&(l.value.scrollLeft+=v)};return x.useResizeObserver(l,s=>f()),(s,p)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"tabsContainer",ref:l,class:"height-100 flex overflow-hidden scroll-behavior-smooth",style:e.normalizeStyle(e.unref(a.Utils).json2cssObject(t.option.css.tab))},[u.value?(e.openBlock(),e.createElementBlock("button",{key:0,class:"flex-none cursor-pointer position-absolute translate-center-left-active-scale-095 top-50 background-size-cover",style:e.normalizeStyle(e.unref(a.Utils).json2cssObject(t.option.css.nav.left)),onClick:_},null,4)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(c,y)=>(e.openBlock(),e.createElementBlock("div",{key:y,class:e.normalizeClass(["flex flex-none cursor-pointer transition-color-background-color background-size-cover",{selected:c.value===n.value}]),style:e.normalizeStyle(e.unref(a.Utils).json2cssObject(c.value===n.value?t.option.css.item.selected:t.option.css.item)),onClick:e.withModifiers(q=>m(c),["stop"])},[e.createVNode(E.default,{"text-style":c.value===n.value?t.option.css.item.selected.textStyle:t.option.css.item.textStyle,text:c.label},null,8,["text-style","text"])],14,B))),128)),u.value?(e.openBlock(),e.createElementBlock("button",{key:1,class:"flex-none cursor-pointer position-absolute translate-center-right-active-scale-095 top-50 background-size-cover",style:e.normalizeStyle(e.unref(a.Utils).json2cssObject(t.option.css.nav.right)),onClick:g},null,4)):e.createCommentVNode("",!0)],4))}});exports.default=z;
