"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const c=require("vue"),o=require("lodash"),q=require("../../commons/plugins/datasource/index.js"),g=require("../../commons/core/useChart.js"),f=require("../../commons/utils/parseDataset.js"),x=require("../../commons/utils/cloneSeries.js"),m=require("../../commons/plugins/event/index.js"),w={class:"zerov-widget"},S=["id"],k=c.defineComponent({name:"zv-chart-other-radar"}),y=c.defineComponent({...k,props:{basicOption:{},sources:{},useEvents:{},uuid:{}},emits:["chart-click","chart-dblclick","chart-mousedown","chart-mouseover","chart-mouseout","chart-contextmenu"],setup(b,{expose:E,emit:v}){const e=b,_=v,{id:D,setOption:h,chart:O,renderChart:u,renderData:i}=g.useChart({basicOption:o.cloneDeep(e.basicOption),useEvents:o.cloneDeep(e.useEvents),customRenderData:s=>{s=o.cloneDeep(s),q.SHJDatasourceV2.parse({tId:e.uuid,sources:e.sources,callback:({data:a})=>{try{let l=function(t){return t.reduce((r,n)=>r.includes(n)?r:[...r,n],[])};m.SHJParseEvent.parseEvents(e.useEvents,"dataListener",a),s.dataset=f.parseDataset(o.cloneDeep(a)),s.series=x.cloneSeries(a,s.series);const d=[],p=[];s.dataset.source.forEach(t=>{for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];Number(n)&&(p.push(Number(n)),d.push(r))}}),s.radar.indicator=[],l(d).forEach(t=>{s.radar.indicator.push({text:t,max:2e3})}),s.radar.indicator.forEach(t=>{t.max=p.sort((r,n)=>n-r)[0]}),s.dataset=f.parseDataset(o.cloneDeep(a),l(d)),h(s)}catch{m.SHJParseEvent.parseEvents(e.useEvents,"dataListener",null),h(s)}}})},emit:_});return c.watch(()=>e.sources,()=>{e.sources&&e.sources.length>0&&i(e.basicOption)},{deep:!0}),c.watch(()=>o.cloneDeep(e.basicOption),(s,a)=>{o.isEqual(s,a)||u(s)},{deep:!0}),E({getEchartsInstance:()=>O.value,refresh:()=>{e.sources&&e.sources.length>0&&u(e.basicOption),i(e.basicOption)},refreshView:()=>{e.sources&&e.sources.length>0&&u(e.basicOption)},refreshData:()=>{i(e.basicOption)}}),(s,a)=>(c.openBlock(),c.createElementBlock("div",w,[c.createElementVNode("div",{id:c.unref(D),class:"widget"},null,8,S)]))}});exports.default=y;
